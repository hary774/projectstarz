<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Natural Stacking Hearts & Stars</title>
  <style>
    body {
      margin: 0;
      background: #000;
      overflow: hidden;
      height: 100vh;
      cursor: crosshair;
      position: relative;
    }

    .particle {
      position: absolute;
      width: 64px;
      height: 64px;
      image-rendering: pixelated;
      pointer-events: none;
      transform: translate(-50%, -50%);
    }
  </style>
</head>
<body>

  <script>
    const images = ['heart.png', 'star.png'];
    const particles = [];
    const gravity = 0.6;
    const size = 64;
    const maxStackHeight = window.innerHeight / 2;

    function createParticle(x, y) {
      const img = document.createElement('img');
      img.src = images[Math.floor(Math.random() * images.length)];
      img.className = 'particle';
      img.style.left = `${x}px`;
      img.style.top = `${y}px`;

      const particle = {
        el: img,
        x,
        y,
        vx: (Math.random() - 0.5) * 6,
        vy: Math.random() * -6 - 3,
        landed: false
      };

      document.body.appendChild(img);
      particles.push(particle);
    }

    function checkCollision(p1, p2) {
      const dx = p1.x - p2.x;
      const dy = p1.y - p2.y;
      const distance = Math.sqrt(dx * dx + dy * dy);
      return distance < size - 5 && Math.abs(dy) < size; // overlap in range
    }

    function updateParticles() {
      for (let p of particles) {
        if (p.landed) continue;

        p.vy += gravity;
        p.x += p.vx;
        p.y += p.vy;

        // Check collision with ground
        if (p.y >= window.innerHeight - size / 2) {
          p.y = window.innerHeight - size / 2;
          p.vx = 0;
          p.vy = 0;
          p.landed = true;
        }

        // Check collision with other landed particles
        for (let other of particles) {
          if (other === p || !other.landed) continue;
          if (checkCollision(p, other) && p.y < other.y) {
            p.y = other.y - size;
            p.vx = 0;
            p.vy = 0;
            p.landed = true;
            break;
          }
        }

        // Limit stacking to half screen
        if (p.landed && p.y < window.innerHeight - maxStackHeight) {
          p.el.remove(); // remove if too high
          p.landed = true;
        } else {
          p.el.style.left = `${p.x}px`;
          p.el.style.top = `${p.y}px`;
        }
      }

      requestAnimationFrame(updateParticles);
    }

    document.addEventListener('click', (e) => {
      for (let i = 0; i < 10; i++) {
        createParticle(e.clientX, e.clientY);
      }
    });

    updateParticles();
  </script>
</body>
</html>
